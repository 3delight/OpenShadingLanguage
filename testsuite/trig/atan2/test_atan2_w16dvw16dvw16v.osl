#ifndef M_PI
#define M_PI 3.14159265358979
#endif

//testshade --batched --llvm_debug -g 200 200 test_atan2_w16dv_w16dv_w16v -od uint8 -o res a.tif -o Dxres b.tif -o res_m c.tif -o Dxres_m d.tif


shader
test_atan2_w16dv_w16dv_w16v (output color res = 0,
			     output color Dxres = 0,
			     output color res_m = 0,
			     output color Dxres_m = 0)
{
    
  vector a = u;
  vector b = 2;


  vector res_ = 0;
  vector Dxres_ = 0;
  
 res_ = atan2(a,b); 
 Dxres_ = Dx(res_);

if (int(P[0]*200)%2){

res_m = atan2(v,3);
Dxres_m = Dx(res_m);

}

res = res_;
Dxres = Dxres_;

}
