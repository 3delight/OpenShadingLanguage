#ifndef M_PI
#define M_PI 3.14159265358979
#endif

//testshade --batched --llvm_debug -g 4 4 test_atan2_w16f_w16f_w16f -o res a.tif | grep o

shader
atan2_u_vector_u_vector (output color res = 0,
               output color res_m = 0)
{
    
  vector a = vector(0.1, 0.5, 0.2);
  vector b = vector(0.4, 0.6, 0.8);


 vector res_ = 0;
 res_ = atan2(a,b); 

if (int(P[0]*200)%2){

res_m = atan2(b,a);

}
res = res_;

}
