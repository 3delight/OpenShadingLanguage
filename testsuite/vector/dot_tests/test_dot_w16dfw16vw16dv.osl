shader test_dot_w16dfw16vw16dv (output color ddot = 0,
                                output color dxdot = 0,
                                output color dydot = 0,
                                
                                output color mddot = 0,
                                output color mdxdot = 0,
                                output color mdydot = 0
                                )
//testshade --batched --llvm_debug -g 4 4 test_dot_w16dfw16dvw16v | grep osl_dot
{
    vector a = vector(1.0, 1.0, 1.0);
    vector b = vector(u+v, -u-v, u+v);
   // vector b = vector(u+v,  u+v, u+v);
    
   // float d = dot(a, b);
    ddot = dot(a,b);
    dxdot = Dx(ddot);
    dydot = Dy(ddot);
    
    float mddot_ = 0.0;
    float mdxdot_ = 0.0;
    float mdydot_ = 0.0;
    
if(int(P[0]*200)%2){
           

           //printf ("\n");
           //printf ("dot product: d = dot(%.4g, %.4g) = %.4g  Dx(d) = %.4g  Dy(d) = %.4g\n",
           //      a, b, d, Dx(d), Dy(d));
           
           mddot_ = dot(vector(0.1,0.2,0.3),b);
           mdxdot_ = Dx(mddot_);
           mdydot_ = Dy(mddot_);


}

mddot = mddot_;
mdxdot = mdxdot_;
mdydot = mdydot_;

}
